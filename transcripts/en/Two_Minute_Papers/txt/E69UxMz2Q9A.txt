Speaker 1:          00:00          So, um, as I said before, the tone my, but we will look at what's developed and how the wall in Etsy graph 2002 presented. So it's all, it has, it had already some time to prove itself, so to say. Um, it's widely used, so most a light simulation brotox and also HDR photography tools, you have it and it has both a global and a local variant. So they were both present here. You'll see the difference between a global and the local approach. Yeah,

Speaker 2:          00:39          you can come.

Speaker 1:          00:41          Um, yes, in some way. I mean I'm usually convolutions by fixed Carmel. So your kernel function is the same. Um, here, this could be a nonlinear car. So it's not that it's linear convolution in the sense that you have one fixed cargo, the toss it, but you have a non linear mapping in this sense. It's not really convolution, but the implementations can are in spirit. So if you want to have it fast, it's apparent elation, parallelization strategies that work for convolutions of the work for them.

Speaker 2:          01:28          Yeah.

Speaker 1:          01:29          Um, usually you, I will go into the local approach later, but you usually have to attempt the feature size. So I don't you do multiple passes with different discretization of your calls size or you taking a huge call and very different function. So,

Speaker 2:          01:50          okay,

Speaker 1:          01:50          okay. Here the difference between a global and the local approach. Um, I'm not hundred percent sure how vital this is perceivable this bro check door for example. You see that the local approach, it's much more contrast in the coop my path or for example, in the, um, in the mosaics on the judgment. I think an older one already works very well, is faster, but it doesn't give you all the possibilities that your I would give you. So the steps, these are just a short outline. I will explain what this meant with this formula does of course, if we want to have in depth details on this, um, the references at the end of the lecture. So I'm here, I present the global version. So you will now have one mapping function off the whole image or of the luminance values of the whole image to Eh, um, color space.

Speaker 1:          03:03          So the first thing you do is you compute some kind of average of the image. So since you do not know if this is, is this inherently a very dark image or is it um, globally a very bright image, you somehow have to set the baseline so to say, and this is done with the log average, so you don't just ever age the, um, the sun, so you don't sum up in divide because this would give, um, unproportional weight to the large values because they are some help exponentially distribute that. You can imagine. So this takes care of that. So you're um,

Speaker 2:          03:53          okay,

Speaker 1:          03:54          you ever h in log space and 10 convert back into explanation.

Speaker 2:          04:00          Okay.

Speaker 1:          04:00          And then you have some kind of average of your scene. So this is the approximate average brightness of the image that I'm looking at. And then you met this to a middle gray value. So a is now what, what do you define as you want to have middle gray. This you can vary. This also depends on what the ranges you have available. And this now sets the bar so everything above this medical grade will be brighter, everything below would be darker. And then um,

Speaker 1:          04:42          what you do is you take the middle grade value and um, skate sampled accordingly to it. So now you don't have a input in some kind of arbitrary range but you have it relative to the middle grade where you and Ben, what you do is that your compress the high Luminance's. So as, um, if you're a member from before our distribution division by a maximum, which gave you just a single bright spot in the image, this is because the high lumen answers dominate, usually dominate the scene but are only, have very small extent in the senior sales imagined looking at the sun. I mean the son is very small when compared to the whole skydome but it would dominate it as immensely higher uprightness values than the surrounding blue of the sky. So what you do here is not that you are men, you're escaped nominates values to the final output by compressing the higher Luminance's. So in the lower right you see the function, the mapping function. So, um, as you see that, Eh, a huge range save from Daniel four to 10 in the x axis is mapped to a rather small part in the y axis. That means that um, a lot of uh, large Luminance's are just compressed in a small, um, range in a say RGB values.

Speaker 1:          06:25          And what you also have is that the small luminance, so to the small Lumina answers in the input file or in the input image, um, are mapped to a larger extent. On the y axis. This, you can see that there are slow of the faction starts out as nearly vertical Lee.

Speaker 2:          06:50          Okay,

Speaker 1:          06:52          go at a 45 degree, you will have a one one mapping which is approximately a two. And then you have a compression. So well what this mapping to us it, it compresses the high lumen answers and enhances the low Luminance's. And this thank to the mapping and you can convert this into, so I go back. So the output lumen answers, then half are in a predefined range from zero to one and can then be mapped to whatever color space you like.

Speaker 2:          07:26          Okay,

Speaker 1:          07:27          so the local version, this is now the one that takes the neighbors into account, starts off similarly. So your computer log ever ridge to get an estimate is the average brightness of my scene. Then you're met the values to average gray. That means that the value of one is now my, uh, the middle of gray to the defined. But now I do not compress the luminance by one uniform function over the whole image, but then locally at depth this function by looking at the neighbors. So now, um, this, um, the local average, um, upper case B now depends not only on the coordinates in the image, so x and y. So the Pixel that I'm there right now, but it also depends on some kind of scale. The scale means how uniform and my brightness distributions there. So we are, I am I at a say a silhouette where half of it is very dark, half of it is very bright or min a homogeneous region because in homogeneous regions I would adapt, uh, on the extent on the rate dinner to this brightness. And if it's accommodated to this brightness, it can differentiate details better. Um, you perhaps have already experienced that when you look at the moon. So if you look quickly at the moon, it's just a bright spot, but the longer you look at it, the more details you can discern. This is an adaptation of your iTunes. And this happens also at a local sports of the retina. And this is what seem related here. So you compute for every pixel position x, y, and locals came.

Speaker 2:          09:35          Yeah.

Speaker 1:          09:35          And with this local scale your time, um, you compute the local average v and this now gives you how much range compression is going to happen at this location.

Speaker 2:          09:52          Okay.

Speaker 1:          09:53          So, um, so how to get this came. So this case is, um, the extent

Speaker 1:          10:03          of an area around to speak for whether brightness doesn't change too much. So in this example where you have a colorful, um, church window does, is that is illuminated from outside. You have three different examples on how your, um, Ken puts the influence re regional for your scheme. So that land, how tall [inaudible] asked this by computing to [inaudible] and then look at the [inaudible], um, [inaudible] them in a way that they have a certain behavior. So in the very top you'll see your assume that the pixel is in the center of the two concentric circles. So this is the biggest goal that I want to talk about now. And if I lie, if I bought two concentric small circles around it, then I see that, um, that the center area, the smaller circle is quite smooth in the distribution of brightnesses. But the Alto Circle, it's very smooth too. So there is no significant difference between the small and the large circle.

Speaker 1:          11:21          That means that my scale is too small. That means that I could enlarge my circle even more. And stealing, um, retains smoothness. In the center example, you see the correct application so that the center, this has smooth values. So they are approximately the same brightness. But if you take now the outer circle that intersects the window, you see that suddenly in this footprint, very large values are. So you'll see that the small circle is smooth, but the surrounding area is not smooth. And this is what you want to achieve when you determined the local skate. So the larger the local scale is the, the more, um, you are looking at the large patch of equal, um, brightnesses and your, I would adapt to that. That means that for this pixel you can improve the contrast because I will do the same. Um, and other failure case, what you should not do is that you make the piece too large as the, as shown in the bottom example because your bright values already in the northeast.

Speaker 2:          12:37          Okay?

Speaker 1:          12:38          So this scale, it would be too large.

Speaker 2:          12:41          Okay.

Speaker 1:          12:42          Um, I go back. So what you get, but this, when you notice k, you know,

Speaker 2:          12:52          yeah,

Speaker 1:          12:53          how large the region is, where you can compute your local area average. And this then allows you to locally compress your range. So if it's very smooth, you compress less. If you're next to very bright boundaries, you're, so if you're there, if you're next to these continuities in the brightness and your image, so they are, you are at the verge of traversing from bright to dim region or vice versa. You go to the opposite. Yeah. The ratio between the larger radius. Constance. Exactly. Yeah. This is the approach that you take there and then you have to find this, I mean they are also show you an implementation. All this can be efficiently mapped because I mean triangle all the possible, um, circles is, or this is not feasible so you need some kind of approximation that gives you a good estimate of that also is he goes to the corner of the immune system. Um, yeah. I mean, I mean I don't know how they handled it is, but I would guess that he just ignore everything that's out of the image. So you have to cope with your, do you have there and, but this is natural in the corners of your image. You get less neighborhood so you get less information of all the surrounding looks like. So you will get, say less optimal tone maybe.

Speaker 1:          14:32          So I'm here, uh, another difference, uh, assuming the image before. So as you can see, the angel fingers on the wall are much higher contrast and this is now because the brightness whale you around or relatively, so if you're calm prds with say the window next to it, then this has a very uniform brightness. Even if the colors are perhaps different, this is still a low range as you saw before. Between sun and moon, it was 800,000. Between Black and white, it was 100 or 1000. So, um, if you have direct or indirect illumination counts much more than just color variations of your surface. So here, the Dole mapper, correct, the deck clean, it's local verse. She that the brightness values are quite uniform in this region, so it enhances the contrast.

Speaker 1:          15:39          So, um, now this wall of this, uh, concludes the Rialto met, but there are also other, um, told mapping approaches. So in this, um, see graph 2002 was the year of the tone may bus because there were three tone, I think, uh, approaches presented. Um, so one of those was a bilateral filter. Perhaps you already heard of Bellator filtering in, um, computer vision perhaps. Um, they are, this is, you can imagine it as a Darshan smoothing that does not move away ages. So if you have a large difference in your image, then it does not smooth decently. So this is, you can also call it age preserving smooth thing. And um, you can imagine that this is somehow conception similar to this skein estimation of a handheld because the scale estimation books where do the brightness values, um, define lot. So these are saved my brightness ahs in the image and then it doesn't try to propagate contrast enhancement or what his age and the bilateral fifth dose can do the same thing because he just stopped the filtering process at ages.

Speaker 1:          17:05          Then another approach by photog great end processing, um, this is, um, you can imagine an image, say you have only illuminates channel of a single, um, color. Then you can imagine your image as a height Farfetch. So bright spots, um, correspond to high peaks team regions too low valleys. And what they do in this work is that the look at the gradients. So Hall's deep are the slopes in my image and then they compress ingredient range does it allows them to um, to per surf low gradients because these are small slopes are the Arctic details in the team layer illuminated regions and the s and a very high slopes are there. Um, Duran pops to the bright spots. So if your chest, um, say reduce the high gradients, you also get a similar behavior that your own way, um, reduce the range in non uniform regions.

Speaker 1:          18:32          So these are three approaches that do approximately the same. They have the same underlying idea but they have different approaches to it. So they're one of our Hanhardt those more into what what's used in, um, in photography with their disease exposure plates that you can use. Bilateral filtering immediately uses are whale established filtering, partaken in signal processing, but it's most likely very suboptimal from a perceptual point of view. Um, gradient processing allows a very fast application but perceptionally of these who works there and how to make this the best and um, this speed increases the two perhaps needed, um, 13 years ago and not really relevant now. So you don't need to take approximations that we're highly relevant before into account anymore and just do the and just have something that's less efficient but gives you a lot of the box, nice solution. And uh, we feel check we can be there. Um, the German version has along the list, um, the least, approximately 20 different variants.

Speaker 1:          19:58          Um, the literature for debt is brand hut not only started that but also continued research and that, and he's a con, uh, seen as one of the say experts that to go to when to mapping is concerned. He wrote a book about that. So heightened emigre ng change. Um, and you can also see this three papers if you want to know how to speak developed, um, you just check for example, there are and how to paper on the Digital Library of ACM. You can, uh, to lose from here, from the university. So you get an a car, you get immediate access to the whole Digital Library of ACM and they are, you can just click on site that buy and then you get the long list of papers that referenced the original work about and hot and then you can sort them by a years and look what different approaches were used. Good. That concludes the tone. I've been parts. Are there any questions? Okay. If not, oral method is used cameos?

Speaker 2:          21:26          MMM,

Speaker 1:          21:29          to some extent. MMM, because I mean you're inherently losing information because,

Speaker 1:          21:44          okay. The sate of thing where you for sure lose precision is if you have before say 24 Pete venues and then you're in Colton in eight beat RGB values. Then you have a conversation of your brightness ratings. This is unrecovered. This is just lost. The other thing is if you use local approaches that take that, take up the neighborhood information to account and then through different things in different regions of the image, then it could be that you have some kind of ambig curiosity if you want to reverse this process because then it could be that you're either had, say in original data, large brightness Barrios and as a, at a small scale or a large range compression then or the range was already small like that and you'll just use less compression. So you, um, you do not have the full information how local approaches adapt to certain parts of the image. You will have to infer this somehow, I would guess like a customization approach. So you've looked like that locally. You should have the same skein that you assume that you reconstruct and then you can recover you're seeking, but you will not be able to recover it

Speaker 1:          23:18          with global approach us. It should be possible. Yeah.

Speaker 2:          23:24          Yeah.

Speaker 1:          23:24          Okay. Yup. Combined goal and the local ones is the right one. Tournament does any way equal amounts within global one? That's a local one. If you look here, um, the local version has, uh, please express she, so the, um, the scales normally names is then divided by some kind of local average. And the global version, the first two steps are identical, but then it uses the escaped venue all way at the very center to say compute this local average. So the global version is a special case of the local version that there is not a certain waiting governmental if you, uh, no, no, no, no, no, uh, um, that illuminates all support. This is what you get. So for each picture location, you get a scale luminance between zero and one, but a global approach and by the local approach. So here, it also immediately gives you the ultimate luminance so that there is no combination then.

Speaker 2:          24:45          Okay.

Speaker 1:          24:48          The questions?

Speaker 2:          24:50          Yeah.

Speaker 1:          24:50          Okay. Dan, thank you for your attention. And this concludes this [inaudible]

Speaker 2:          24:59          Aye.